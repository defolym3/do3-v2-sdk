"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n,r,i=require("@defolym3/do3-sdk-core"),o=e(require("jsbi")),u=e(require("tiny-invariant")),a=require("@ethersproject/solidity"),s=require("@ethersproject/address"),c=require("@ethersproject/bignumber"),p=((t={})[i.ChainId.AMOY]="",t[i.ChainId.ARBITRUM]="",t[i.ChainId.ARBITRUM_SEPOLIA]="",t[i.ChainId.AVALANCHE]="",t[i.ChainId.BASE]="",t[i.ChainId.BASE_SEPOLIA]="",t[i.ChainId.BSC]="",t[i.ChainId.BSC_TESTNET]="",t[i.ChainId.FRAX_TESTNET]="",t[i.ChainId.FUJI]="",t[i.ChainId.HEDERA]="",t[i.ChainId.HEDERA_TESTNET]="",t[i.ChainId.HOLESKY]="",t[i.ChainId.KAIA]="",t[i.ChainId.KAIROS]="",t[i.ChainId.METIS_TESTNET]="",t[i.ChainId.MODE]="",t[i.ChainId.MODE_TESTNET]="",t[i.ChainId.OKX]="",t[i.ChainId.OPBNB_TESTNET]="",t[i.ChainId.OPTIMISM]="",t[i.ChainId.SCROLL]="",t[i.ChainId.SCROLL_SEPOLIA]="",t[i.ChainId.SEPOLIA]="",t[i.ChainId.SHAPE]="",t[i.ChainId.SHAPE_TESTNET]="",t[i.ChainId.SONEIUM_TESTNET]="",t[i.ChainId.UNICHAIN_TESTNET]="",t),d=((n={})[i.ChainId.AMOY]="",n[i.ChainId.ARBITRUM]="",n[i.ChainId.ARBITRUM_SEPOLIA]="",n[i.ChainId.AVALANCHE]="",n[i.ChainId.BASE]="",n[i.ChainId.BASE_SEPOLIA]="",n[i.ChainId.BSC]="",n[i.ChainId.BSC_TESTNET]="",n[i.ChainId.FRAX_TESTNET]="",n[i.ChainId.FUJI]="",n[i.ChainId.HEDERA]="",n[i.ChainId.HEDERA_TESTNET]="",n[i.ChainId.HOLESKY]="",n[i.ChainId.KAIA]="",n[i.ChainId.KAIROS]="",n[i.ChainId.METIS_TESTNET]="",n[i.ChainId.MODE]="",n[i.ChainId.MODE_TESTNET]="",n[i.ChainId.OKX]="",n[i.ChainId.OPBNB_TESTNET]="",n[i.ChainId.OPTIMISM]="",n[i.ChainId.SCROLL]="",n[i.ChainId.SCROLL_SEPOLIA]="",n[i.ChainId.SEPOLIA]="",n[i.ChainId.SHAPE]="",n[i.ChainId.SHAPE_TESTNET]="",n[i.ChainId.SONEIUM_TESTNET]="",n[i.ChainId.UNICHAIN_TESTNET]="",n),h=o.BigInt(1e3),l=o.BigInt(0),m=o.BigInt(1),f=o.BigInt(5),y=o.BigInt(997),T=o.BigInt(1e3),v=o.BigInt(1e4),A=new i.Percent(l),I=new i.Percent(m),E=((r={})[i.ChainId.SHAPE_TESTNET]={name:"Defolym3 LP's",symbol:"DEFOL-LP"},r[i.ChainId.SONEIUM_TESTNET]={name:"Defolym3 LP's",symbol:"DEFOL-LP"},r[i.ChainId.BASE]={name:"TunaDriver LPs",symbol:"TUNA-LP"},r);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?i:String(i),r)}var i}function C(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e,t,n){return(S=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i}).apply(null,arguments)}function P(e){var t="function"==typeof Map?new Map:void 0;return(P=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,O(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var N="setPrototypeOf"in Object,R=function(e){function t(){var n;return(n=e.call(this)||this).isInsufficientReservesError=!0,n.name=n.constructor.name,N&&Object.setPrototypeOf(b(n),(this instanceof t?this.constructor:void 0).prototype),n}return k(t,e),t}(P(Error)),B=function(e){function t(){var n;return(n=e.call(this)||this).isInsufficientInputAmountError=!0,n.name=n.constructor.name,N&&Object.setPrototypeOf(b(n),(this instanceof t?this.constructor:void 0).prototype),n}return k(t,e),t}(P(Error)),F=function(e){var t=e.factoryAddress,n=e.tokenA,r=e.tokenB,i=n.sortsBefore(r)?[n,r]:[r,n],o=i[0];return s.getCreate2Address(t,a.keccak256(["bytes"],[a.pack(["address","address"],[o.address,i[1].address])]),d[o.chainId])},L=function(){function e(t,n){var r=t.currency.sortsBefore(n.currency)?[t,n]:[n,t],o=E[r[0].currency.chainId];this.liquidityToken=new i.Token(r[0].currency.chainId,e.getAddress(r[0].currency,r[1].currency),18,o.symbol,o.name),this.tokenAmounts=r}e.getAddress=function(e,t){return F({factoryAddress:p[e.chainId],tokenA:e,tokenB:t})};var t=e.prototype;return t.involvesToken=function(e){return e.equals(this.token0)||e.equals(this.token1)},t.priceOf=function(e){return this.involvesToken(e)||u(!1),e.equals(this.token0)?this.token0Price:this.token1Price},t.reserveOf=function(e){return this.involvesToken(e)||u(!1),e.equals(this.token0)?this.reserve0:this.reserve1},t.getOutputAmount=function(t,n){if(void 0===n&&(n=!0),this.involvesToken(t.currency)||u(!1),o.equal(this.reserve0.quotient,l)||o.equal(this.reserve1.quotient,l))throw new R;var r=this.reserveOf(t.currency),a=this.reserveOf(t.currency.equals(this.token0)?this.token1:this.token0),s=n?this.derivePercentAfterSellFees(t):A,c=s.greaterThan(A)?i.CurrencyAmount.fromRawAmount(t.currency,s.multiply(t).quotient):t,p=o.multiply(c.quotient,y),d=o.multiply(p,a.quotient),h=o.add(o.multiply(r.quotient,T),p),m=i.CurrencyAmount.fromRawAmount(t.currency.equals(this.token0)?this.token1:this.token0,o.divide(d,h));if(o.equal(m.quotient,l))throw new B;var f=n?this.derivePercentAfterBuyFees(m):A,v=f.greaterThan(A)?i.CurrencyAmount.fromRawAmount(m.currency,m.multiply(f).quotient):m;if(o.equal(v.quotient,l))throw new B;return[v,new e(r.add(c),a.subtract(v))]},t.getInputAmount=function(t,n){void 0===n&&(n=!0),this.involvesToken(t.currency)||u(!1);var r=n?this.derivePercentAfterBuyFees(t):A,a=r.greaterThan(A)?i.CurrencyAmount.fromRawAmount(t.currency,o.add(t.divide(r).quotient,m)):t;if(o.equal(this.reserve0.quotient,l)||o.equal(this.reserve1.quotient,l)||o.greaterThanOrEqual(t.quotient,this.reserveOf(t.currency).quotient)||o.greaterThanOrEqual(a.quotient,this.reserveOf(t.currency).quotient))throw new R;var s=this.reserveOf(t.currency),c=this.reserveOf(t.currency.equals(this.token0)?this.token1:this.token0),p=o.multiply(o.multiply(c.quotient,a.quotient),T),d=o.multiply(o.subtract(s.quotient,a.quotient),y),h=i.CurrencyAmount.fromRawAmount(t.currency.equals(this.token0)?this.token1:this.token0,o.add(o.divide(p,d),m)),f=n?this.derivePercentAfterSellFees(h):A;return[f.greaterThan(A)?i.CurrencyAmount.fromRawAmount(h.currency,o.add(h.divide(f).quotient,m)):h,new e(c.add(h),s.subtract(t))]},t.getLiquidityMinted=function(e,t,n){e.currency.equals(this.liquidityToken)||u(!1);var r,a=t.currency.sortsBefore(n.currency)?[t,n]:[n,t];if(a[0].currency.equals(this.token0)&&a[1].currency.equals(this.token1)||u(!1),o.equal(e.quotient,l))r=o.subtract(i.sqrt(o.multiply(a[0].quotient,a[1].quotient)),h);else{var s=o.divide(o.multiply(a[0].quotient,e.quotient),this.reserve0.quotient),c=o.divide(o.multiply(a[1].quotient,e.quotient),this.reserve1.quotient);r=o.lessThanOrEqual(s,c)?s:c}if(!o.greaterThan(r,l))throw new B;return i.CurrencyAmount.fromRawAmount(this.liquidityToken,r)},t.getLiquidityValue=function(e,t,n,r,a){var s;if(void 0===r&&(r=!1),this.involvesToken(e)||u(!1),t.currency.equals(this.liquidityToken)||u(!1),n.currency.equals(this.liquidityToken)||u(!1),o.lessThanOrEqual(n.quotient,t.quotient)||u(!1),r){a||u(!1);var c=o.BigInt(a);if(o.equal(c,l))s=t;else{var p=i.sqrt(o.multiply(this.reserve0.quotient,this.reserve1.quotient)),d=i.sqrt(c);if(o.greaterThan(p,d)){var h=o.multiply(t.quotient,o.subtract(p,d)),m=o.add(o.multiply(p,f),d),y=o.divide(h,m);s=t.add(i.CurrencyAmount.fromRawAmount(this.liquidityToken,y))}else s=t}}else s=t;return i.CurrencyAmount.fromRawAmount(e,o.divide(o.multiply(n.quotient,this.reserveOf(e).quotient),s.quotient))},t.derivePercentAfterSellFees=function(e){var t=this.token0.wrapped.equals(e.wrapped.currency)?this.token0.wrapped.sellFeeBps:this.token1.wrapped.sellFeeBps;return null!=t&&t.gt(c.BigNumber.from(0))?I.subtract(new i.Percent(o.BigInt(t)).divide(v)):A},t.derivePercentAfterBuyFees=function(e){var t=this.token0.wrapped.equals(e.wrapped.currency)?this.token0.wrapped.buyFeeBps:this.token1.wrapped.buyFeeBps;return null!=t&&t.gt(c.BigNumber.from(0))?I.subtract(new i.Percent(o.BigInt(t)).divide(v)):A},C(e,[{key:"token0Price",get:function(){var e=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new i.Price(this.token0,this.token1,e.denominator,e.numerator)}},{key:"token1Price",get:function(){var e=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new i.Price(this.token1,this.token0,e.denominator,e.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),e}(),H=function(){function e(e,t,n){this._midPrice=null,e.length>0||u(!1);var r=e[0].chainId;e.every((function(e){return e.chainId===r}))||u(!1);var i=t.wrapped;e[0].involvesToken(i)||u(!1),void 0===n||e[e.length-1].involvesToken(n.wrapped)||u(!1);for(var o,a=[i],s=x(e.entries());!(o=s()).done;){var c=o.value,p=c[1],d=a[c[0]];d.equals(p.token0)||d.equals(p.token1)||u(!1);var h=d.equals(p.token0)?p.token1:p.token0;a.push(h)}this.pairs=e,this.path=a,this.input=t,this.output=n}return C(e,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var e,t=[],n=x(this.pairs.entries());!(e=n()).done;){var r=e.value,o=r[1];t.push(this.path[r[0]].equals(o.token0)?new i.Price(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new i.Price(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var u=t.slice(1).reduce((function(e,t){return e.multiply(t)}),t[0]);return this._midPrice=new i.Price(this.input,this.output,u.denominator,u.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),e}();function U(e,t){return e.inputAmount.currency.equals(t.inputAmount.currency)||u(!1),e.outputAmount.currency.equals(t.outputAmount.currency)||u(!1),e.outputAmount.equalTo(t.outputAmount)?e.inputAmount.equalTo(t.inputAmount)?0:e.inputAmount.lessThan(t.inputAmount)?-1:1:e.outputAmount.lessThan(t.outputAmount)?1:-1}function M(e,t){var n=U(e,t);return 0!==n?n:e.priceImpact.lessThan(t.priceImpact)?-1:e.priceImpact.greaterThan(t.priceImpact)?1:e.route.path.length-t.route.path.length}var j=function(){function e(e,t,n){this.route=e,this.tradeType=n;var r=new Array(e.path.length);if(n===i.TradeType.EXACT_INPUT){t.currency.equals(e.input)||u(!1),r[0]=t.wrapped;for(var o=0;o<e.path.length-1;o++){var a=e.pairs[o].getOutputAmount(r[o]);r[o+1]=a[0]}this.inputAmount=i.CurrencyAmount.fromFractionalAmount(e.input,t.numerator,t.denominator),this.outputAmount=i.CurrencyAmount.fromFractionalAmount(e.output,r[r.length-1].numerator,r[r.length-1].denominator)}else{t.currency.equals(e.output)||u(!1),r[r.length-1]=t.wrapped;for(var s=e.path.length-1;s>0;s--){var c=e.pairs[s-1].getInputAmount(r[s]);r[s-1]=c[0]}this.inputAmount=i.CurrencyAmount.fromFractionalAmount(e.input,r[0].numerator,r[0].denominator),this.outputAmount=i.CurrencyAmount.fromFractionalAmount(e.output,t.numerator,t.denominator)}this.executionPrice=new i.Price(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient),this.priceImpact=i.computePriceImpact(e.midPrice,this.inputAmount,this.outputAmount)}e.exactIn=function(t,n){return new e(t,n,i.TradeType.EXACT_INPUT)},e.exactOut=function(t,n){return new e(t,n,i.TradeType.EXACT_OUTPUT)};var t=e.prototype;return t.minimumAmountOut=function(e){if(e.lessThan(l)&&u(!1),this.tradeType===i.TradeType.EXACT_OUTPUT)return this.outputAmount;var t=new i.Fraction(m).add(e).invert().multiply(this.outputAmount.quotient).quotient;return i.CurrencyAmount.fromRawAmount(this.outputAmount.currency,t)},t.maximumAmountIn=function(e){if(e.lessThan(l)&&u(!1),this.tradeType===i.TradeType.EXACT_INPUT)return this.inputAmount;var t=new i.Fraction(m).add(e).multiply(this.inputAmount.quotient).quotient;return i.CurrencyAmount.fromRawAmount(this.inputAmount.currency,t)},e.bestTradeExactIn=function(t,n,r,o,a,s,c){var p=void 0===o?{}:o,d=p.maxNumResults,h=void 0===d?3:d,m=p.maxHops,f=void 0===m?3:m;void 0===a&&(a=[]),void 0===s&&(s=n),void 0===c&&(c=[]),t.length>0||u(!1),f>0||u(!1),n===s||a.length>0||u(!1);for(var y=s.wrapped,T=r.wrapped,v=0;v<t.length;v++){var A=t[v];if((A.token0.equals(y.currency)||A.token1.equals(y.currency))&&!A.reserve0.equalTo(l)&&!A.reserve1.equalTo(l)){var I=void 0;try{I=A.getOutputAmount(y)[0]}catch(e){if(e.isInsufficientInputAmountError)continue;throw e}if(I.currency.equals(T))i.sortedInsert(c,new e(new H([].concat(a,[A]),n.currency,r),n,i.TradeType.EXACT_INPUT),h,M);else if(f>1&&t.length>1){var E=t.slice(0,v).concat(t.slice(v+1,t.length));e.bestTradeExactIn(E,n,r,{maxNumResults:h,maxHops:f-1},[].concat(a,[A]),I,c)}}}return c},t.worstExecutionPrice=function(e){return new i.Price(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(e).quotient,this.minimumAmountOut(e).quotient)},e.bestTradeExactOut=function(t,n,r,o,a,s,c){var p=void 0===o?{}:o,d=p.maxNumResults,h=void 0===d?3:d,m=p.maxHops,f=void 0===m?3:m;void 0===a&&(a=[]),void 0===s&&(s=r),void 0===c&&(c=[]),t.length>0||u(!1),f>0||u(!1),r===s||a.length>0||u(!1);for(var y=s.wrapped,T=n.wrapped,v=0;v<t.length;v++){var A=t[v];if((A.token0.equals(y.currency)||A.token1.equals(y.currency))&&!A.reserve0.equalTo(l)&&!A.reserve1.equalTo(l)){var I=void 0;try{I=A.getInputAmount(y)[0]}catch(e){if(e.isInsufficientReservesError)continue;throw e}if(I.currency.equals(T))i.sortedInsert(c,new e(new H([A].concat(a),n,r.currency),r,i.TradeType.EXACT_OUTPUT),h,M);else if(f>1&&t.length>1){var E=t.slice(0,v).concat(t.slice(v+1,t.length));e.bestTradeExactOut(E,n,r,{maxNumResults:h,maxHops:f-1},[A].concat(a),I,c)}}}return c},e}();function D(e){return"0x"+e.quotient.toString(16)}var X=function(){function e(){}return e.swapCallParameters=function(e,t){var n=e.inputAmount.currency.isNative,r=e.outputAmount.currency.isNative;n&&r&&u(!1),!("ttl"in t)||t.ttl>0||u(!1);var o,a,s,c=i.validateAndParseAddress(t.recipient),p=D(e.maximumAmountIn(t.allowedSlippage)),d=D(e.minimumAmountOut(t.allowedSlippage)),h=e.route.path.map((function(e){return e.address})),l="ttl"in t?"0x"+(Math.floor((new Date).getTime()/1e3)+t.ttl).toString(16):"0x"+t.deadline.toString(16),m=Boolean(t.feeOnTransfer);switch(e.tradeType){case i.TradeType.EXACT_INPUT:n?(o=m?"swapExactETHForTokensSupportingFeeOnTransferTokens":"swapExactETHForTokens",a=[d,h,c,l],s=p):r?(o=m?"swapExactTokensForETHSupportingFeeOnTransferTokens":"swapExactTokensForETH",a=[p,d,h,c,l],s="0x0"):(o=m?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",a=[p,d,h,c,l],s="0x0");break;case i.TradeType.EXACT_OUTPUT:m&&u(!1),n?(o="swapETHForExactTokens",a=[d,h,c,l],s=p):r?(o="swapTokensForExactETH",a=[d,p,h,c,l],s="0x0"):(o="swapTokensForExactTokens",a=[d,p,h,c,l],s="0x0")}return{methodName:o,args:a,value:s}},e}();exports.BASIS_POINTS=v,exports.CHAIN_LP_TOKEN_INFO=E,exports.FIVE=f,exports.INIT_CODE_HASH="",exports.INIT_CODE_HASHES=d,exports.InsufficientInputAmountError=B,exports.InsufficientReservesError=R,exports.MINIMUM_LIQUIDITY=h,exports.ONE=m,exports.ONE_HUNDRED_PERCENT=I,exports.Pair=L,exports.Route=H,exports.Router=X,exports.Trade=j,exports.V2_FACTORY_ADDRESSES=p,exports.ZERO=l,exports.ZERO_PERCENT=A,exports._1000=T,exports._997=y,exports.computePairAddress=F,exports.inputOutputComparator=U,exports.tradeComparator=M;
//# sourceMappingURL=do3-v2-sdk.cjs.production.min.js.map
